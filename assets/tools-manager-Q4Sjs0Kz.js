var o=Object.defineProperty,t=(t,s,e)=>((t,s,e)=>s in t?o(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e)(t,"symbol"!=typeof s?s+"":s,e);import{f as s}from"./deepseek-integration-DDBlkned.js";import"./ad-manager-nkcXdfJJ.js";class e{constructor(){t(this,"toolsContainer"),t(this,"tools"),t(this,"updateInterval"),this.toolsContainer=document.getElementById("tools-container"),this.tools=[],this.updateInterval=null,this.init()}async init(){try{const o=await fetch("/config/tools.json");if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const t=await o.json();this.tools=t.tools.map((o=>({...o,hasUpdate:!1,latestVersion:o.version}))),this.renderTools(),this.setupUpdateChecker()}catch(o){console.error("加载工具列表失败:",o),this.showError("加载工具列表失败，请刷新页面重试")}}setupUpdateChecker(){this.updateInterval=setInterval((async()=>{try{const o=await fetch("/config/tools.json");if(!o.ok)return;const t=await o.json();this.tools=t.tools.map((o=>{this.tools.find((t=>t.id===o.id));return{...o,hasUpdate:!1,latestVersion:o.version}})),this.renderTools()}catch(o){console.error("更新工具信息失败:",o)}}),216e5)}renderTools(){this.toolsContainer?this.toolsContainer.innerHTML=this.tools.map(((o,t)=>`\n            <div class="tool-card" style="animation-delay: ${.1*t}s">\n                <h3 class="tool-name">${o.name}</h3>\n                <p class="tool-description">${o.description}</p>\n                <div class="tool-meta">\n                    <span>版本 ${o.version}</span>\n                    <span class="tool-size">${o.size}</span>\n                </div>\n                <button class="download-button" onclick="toolsManager.downloadTool('${o.id}')">\n                    下载\n                </button>\n            </div>\n        `)).join(""):console.error("找不到工具容器元素")}async downloadTool(o){try{await s.downloadTool(o)}catch(t){this.showError("下载失败："+t.message)}}showError(o){const t=document.createElement("div");t.className="error-message",t.textContent=o,document.body.appendChild(t),setTimeout((()=>t.remove()),3e3)}}window.addEventListener("DOMContentLoaded",(()=>{window.toolsManager=new e}));
//# sourceMappingURL=tools-manager-Q4Sjs0Kz.js.map
