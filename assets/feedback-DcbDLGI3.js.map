{"version":3,"file":"feedback-DcbDLGI3.js","sources":["../../feedback.html?html-proxy&index=0.js","../../src/js/feedback.js"],"sourcesContent":["\n        document.addEventListener('DOMContentLoaded', () => {\n            // 添加CSS类控制初始显示\n            document.documentElement.classList.add('i18n-initializing');\n            \n            if (window.i18nManager) {\n                i18nManager.addObserver(() => {\n                    // 使用延迟移除加载状态\n                    setTimeout(() => {\n                        document.documentElement.removeAttribute('data-i18n-loading');\n                        document.documentElement.classList.remove('i18n-initializing');\n                    }, 300);\n                });\n            } else {\n                // i18n管理器加载失败，移除加载状态显示默认内容\n                setTimeout(() => {\n                    document.documentElement.removeAttribute('data-i18n-loading');\n                    document.documentElement.classList.remove('i18n-initializing');\n                }, 1000);\n            }\n        });\n\n        // 添加加载超时保护\n        setTimeout(() => {\n            if (document.documentElement.hasAttribute('data-i18n-loading')) {\n                document.documentElement.removeAttribute('data-i18n-loading');\n                document.documentElement.classList.remove('i18n-initializing');\n            }\n        }, 3000);\n    ","// 导入样式\nimport '../css/styles.css';\nimport '../css/components.css';\n\n// 导入功能模块\nimport './animations.js';\nimport '../i18n.js';\nimport './ad-manager.js';\nimport { uiFeedback } from './modules/ui-feedback.js';\n\n// 反馈提交功能\nasync function submitFeedback() {\n  const nameInput = /** @type {HTMLInputElement} */ (document.getElementById('name'));\n  const contactInput = /** @type {HTMLInputElement} */ (document.getElementById('contact'));\n  const questionInput = /** @type {HTMLTextAreaElement} */ (document.getElementById('question'));\n\n  // 检查元素是否存在\n  if (!nameInput || !contactInput || !questionInput) {\n    uiFeedback.showToast('表单加载失败，请刷新页面重试', 'error');\n    return;\n  }\n\n  const name = nameInput.value.trim();\n  const contact = contactInput.value.trim();\n  const question = questionInput.value.trim();\n\n  // 验证输入\n  if (!name || !question) {\n    uiFeedback.showToast('请填写所有必填项', 'error');\n    return;\n  }\n\n  try {\n    uiFeedback.showLoading('正在提交反馈...');\n    \n    // 发送请求\n    const response = await fetch('/api/feedback', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        name,\n        contact,\n        question\n      })\n    });\n\n    if (!response.ok) {\n      throw new Error('提交失败');\n    }\n\n    // 清空表单\n    if (nameInput) nameInput.value = '';\n    if (contactInput) contactInput.value = '';\n    if (questionInput) questionInput.value = '';\n    \n    uiFeedback.showToast('提交成功！', 'success');\n  } catch (error) {\n    uiFeedback.showToast('提交失败，请稍后重试', 'error');\n    console.error('提交反馈失败:', error);\n  } finally {\n    uiFeedback.hideLoading();\n  }\n}\n\n// 绑定提交函数到全局\n/** @type {Window & typeof globalThis & { submitFeedback: typeof submitFeedback }} */\n(window).submitFeedback = submitFeedback;\n"],"names":["document","addEventListener","documentElement","classList","add","window","i18nManager","addObserver","setTimeout","removeAttribute","remove","hasAttribute","submitFeedback","async","nameInput","getElementById","contactInput","questionInput","uiFeedback","showToast","name","value","trim","contact","question","showLoading","fetch","method","headers","body","JSON","stringify","ok","Error","error","console","hideLoading"],"mappings":"gLACQA,SAASC,iBAAiB,oBAAoB,KAEjCD,SAAAE,gBAAgBC,UAAUC,IAAI,qBAEnCC,OAAOC,YACPA,YAAYC,aAAY,KAEpBC,YAAW,KACER,SAAAE,gBAAgBO,gBAAgB,qBAChCT,SAAAE,gBAAgBC,UAAUO,OAAO,oBAAmB,GAC9D,IAAG,IAIVF,YAAW,KACER,SAAAE,gBAAgBO,gBAAgB,qBAChCT,SAAAE,gBAAgBC,UAAUO,OAAO,oBAAmB,GAC9D,IACnB,IAIQF,YAAW,KACHR,SAASE,gBAAgBS,aAAa,uBAC7BX,SAAAE,gBAAgBO,gBAAgB,qBAChCT,SAAAE,gBAAgBC,UAAUO,OAAO,qBAC1D,GACW,KCwCVL,OAAQO,eAzDTC,iBACQ,MAAAC,EAA6Cd,SAASe,eAAe,QACrEC,EAAgDhB,SAASe,eAAe,WACxEE,EAAoDjB,SAASe,eAAe,YAGlF,IAAKD,IAAcE,IAAiBC,EAElC,YADWC,EAAAC,UAAU,iBAAkB,SAInC,MAAAC,EAAON,EAAUO,MAAMC,OACvBC,EAAUP,EAAaK,MAAMC,OAC7BE,EAAWP,EAAcI,MAAMC,OAGjC,GAACF,GAASI,EAKV,IACFN,EAAWO,YAAY,aAenB,WAZmBC,MAAM,gBAAiB,CAC5CC,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CACnBX,OACAG,UACAC,gBAIUQ,GACN,MAAA,IAAIC,MAAM,QAIdnB,MAAqBO,MAAQ,IAC7BL,MAA2BK,MAAQ,IACnCJ,MAA6BI,MAAQ,IAE9BH,EAAAC,UAAU,QAAS,UAC/B,OAAQe,GACIhB,EAAAC,UAAU,aAAc,SAC3BgB,QAAAD,MAAM,UAAWA,EAC7B,CAAY,QACRhB,EAAWkB,aACf,MAnCelB,EAAAC,UAAU,WAAY,QAoCrC"}