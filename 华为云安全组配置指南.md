# 华为云安全组配置指南

## 🔒 快速配置安全组 - 开放22、80、443端口

### 📋 服务器信息
- **服务器**: Ubuntu-cn-south-1-JcF4
- **公网IP**: 113.45.64.145
- **区域**: 华南-广州

---

## 🚀 方法一：通过服务器页面直接配置（推荐）

### 步骤1：进入安全组配置
1. 在当前的华为云控制台页面
2. 找到您的服务器 **Ubuntu-cn-south-1-JcF4**
3. 点击服务器名称或点击右侧的"更多"按钮
4. 选择 **"网络配置" → "安全组"**

### 步骤2：配置入方向规则
点击 **"配置规则"** 或 **"管理规则"** 按钮，然后：

#### 规则1：开放SSH端口（22）
```
方向：       入方向
协议：       TCP
端口：       22
源地址：     0.0.0.0/0
描述：       SSH远程登录
```

#### 规则2：开放HTTP端口（80）
```
方向：       入方向
协议：       TCP
端口：       80
源地址：     0.0.0.0/0
描述：       HTTP网站访问
```

#### 规则3：开放HTTPS端口（443）
```
方向：       入方向
协议：       TCP
端口：       443
源地址：     0.0.0.0/0
描述：       HTTPS安全访问
```

### 步骤3：保存配置
- 点击 **"确定"** 或 **"保存"** 按钮
- 规则立即生效，无需重启服务器

---

## 🎯 方法二：通过安全组管理页面配置

### 步骤1：进入安全组管理
1. 在华为云控制台左侧菜单
2. 找到 **"网络" → "安全组"**
3. 或者直接搜索 **"安全组"**

### 步骤2：找到服务器使用的安全组
1. 查看您服务器当前使用的安全组名称
2. 点击该安全组名称进入详情

### 步骤3：添加入方向规则
点击 **"入方向规则"** 标签页，然后点击 **"添加规则"**

#### 一次性添加所有规则（推荐）

点击 **"快速添加规则"**，可以批量添加：

```
协议端口          源地址          描述
TCP: 22          0.0.0.0/0       SSH
TCP: 80          0.0.0.0/0       HTTP
TCP: 443         0.0.0.0/0       HTTPS
```

或者**逐个添加**：

##### 规则1：SSH (22)
- 协议：TCP
- 端口：22
- 源地址：0.0.0.0/0
- 描述：SSH远程登录

##### 规则2：HTTP (80)
- 协议：TCP
- 端口：80
- 源地址：0.0.0.0/0
- 描述：HTTP网站访问

##### 规则3：HTTPS (443)
- 协议：TCP
- 端口：443
- 源地址：0.0.0.0/0
- 描述：HTTPS安全访问

---

## 📸 图文说明

### 界面位置参考：

```
华为云控制台
├── 计算
│   └── 弹性云服务器 ECS
│       └── 实例列表
│           └── Ubuntu-cn-south-1-JcF4
│               └── [操作] 更多
│                   └── 网络配置
│                       └── 安全组
│                           └── 配置规则
```

### 安全组规则示例表格：

| 方向 | 协议 | 端口范围 | 源地址/目的地址 | 描述 | 操作 |
|------|------|----------|-----------------|------|------|
| 入方向 | TCP | 22 | 0.0.0.0/0 | SSH远程登录 | ✅ |
| 入方向 | TCP | 80 | 0.0.0.0/0 | HTTP网站访问 | ✅ |
| 入方向 | TCP | 443 | 0.0.0.0/0 | HTTPS安全访问 | ✅ |

---

## 🔍 验证安全组配置是否生效

### 方法1：在本地测试端口连通性

```bash
# 测试SSH端口（22）
telnet 113.45.64.145 22
# 或者
nc -zv 113.45.64.145 22

# 测试HTTP端口（80）
telnet 113.45.64.145 80
# 或者
nc -zv 113.45.64.145 80

# 测试HTTPS端口（443）
telnet 113.45.64.145 443
# 或者
nc -zv 113.45.64.145 443
```

### 方法2：使用在线工具

访问在线端口扫描工具：
- https://tool.chinaz.com/port/
- 输入IP：113.45.64.145
- 分别测试端口：22、80、443

### 方法3：直接尝试SSH登录

```bash
ssh root@113.45.64.145
```

如果能连接，说明22端口已开放！

---

## ⚠️ 安全提示

### 1. SSH端口安全建议
如果只需要特定IP访问SSH，可以将源地址改为：
```
源地址：YOUR_IP_ADDRESS/32
```
例如：`123.45.67.89/32`

### 2. 推荐的安全组配置
```
# 基础配置（所有人可访问）
TCP 80   - 0.0.0.0/0  (HTTP)
TCP 443  - 0.0.0.0/0  (HTTPS)

# 限制SSH访问（推荐）
TCP 22   - YOUR_IP/32  (仅您的IP可SSH登录)

# 或者开放SSH给所有人（方便但不太安全）
TCP 22   - 0.0.0.0/0  (任何人可SSH登录)
```

### 3. 其他安全建议
- ✅ 使用强密码
- ✅ 定期更新系统
- ✅ 安装fail2ban防止暴力破解
- ✅ 配置SSH密钥登录
- ✅ 禁用root密码登录（配置密钥后）

---

## 🎯 配置完成检查清单

配置完成后，请确认：

- [ ] SSH端口（22）已开放 - 可以SSH登录
- [ ] HTTP端口（80）已开放 - 可以访问网站
- [ ] HTTPS端口（443）已开放 - 可以使用SSL
- [ ] 规则已保存并生效
- [ ] 能够成功SSH登录：`ssh root@113.45.64.145`
- [ ] 本地能ping通服务器：`ping 113.45.64.145`

---

## 🆘 常见问题

### Q1: 添加了规则但还是无法访问？
**A**: 
1. 确认规则已保存
2. 检查"方向"是否选择了"入方向"
3. 确认源地址是 `0.0.0.0/0`
4. 等待1-2分钟让规则生效
5. 检查服务器内部防火墙（UFW）

### Q2: 不确定当前安全组是否已配置？
**A**: 
在华为云控制台查看服务器详情 → 安全组 → 查看规则列表

### Q3: 误删了规则怎么办？
**A**: 
重新添加即可，安全组规则可以随时添加删除

### Q4: 是否需要配置出方向规则？
**A**: 
一般不需要，默认的出方向规则允许所有流量出去

---

## 📞 需要帮助？

如果配置过程中遇到问题：

1. **截图当前页面**，我可以帮您分析
2. **查看华为云官方文档**：
   - [安全组配置指南](https://support.huaweicloud.com/usermanual-ecs/ecs_03_0120.html)
3. **联系华为云技术支持**（7×24小时）

---

## ✅ 配置完成后

安全组配置完成后，您就可以：

1. **SSH登录服务器**：
   ```bash
   ssh root@113.45.64.145
   ```

2. **运行部署脚本**（登录后执行）：
   ```bash
   # 下载部署脚本
   wget http://您的文件地址/huawei-cloud-deploy.sh
   
   # 或者直接从本地上传
   # 然后执行
   chmod +x huawei-cloud-deploy.sh
   ./huawei-cloud-deploy.sh
   ```

3. **访问网站**：
   - http://113.45.64.145

---

## 🎉 下一步

安全组配置完成后，请告诉我，我将指导您：
1. SSH登录服务器
2. 运行一键部署脚本
3. 测试网站访问

祝配置顺利！🚀
